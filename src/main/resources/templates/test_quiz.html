<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Test-quiz</title>

</head>
<body>

<form name="form_countdown">
    <input name="counter" type="text" value="5"  style="border:none; background-color:transparent;">
</form>


<div class="marudisplay" id="marudisplay">
    <img src="/images/test/maru.jpg">
</div>
<div class="hazuredisplay" id="hazuredisplay">
    <img src="/images/test/batu.jpg">
</div>

<div class="tugiedisplay" id="tugiedisplay">
    <form th:action="@{/sense/test_question/{id}(id=${nextId})}" method="get" />
    　<input type = "submit" th:value="次へ"method="get"/>　　　　　　　
    </form>
</div>

<script>
    var maruimg = document.getElementById('marudisplay');
    var hazureimg = document.getElementById('hazuredisplay');
    var tugieimg = document.getElementById('tugiedisplay');
    maruimg.style.display = "none";
    hazureimg.style.display = "none";
    tugieimg.style.display  = "none";
    function changepage(id) {
        tugieimg.style.display = "block";
        if(id == 1) {
            maruimg.style.display = "block";
            setTimeout(function change(){
                maruimg.style.display = "none";
            }, 1000);

            tugieimg.style.display = "block";
        }
        else if(id == 2){
            tugieimg.style.display = "none";
            hazureimg.style.display = "block";
            setTimeout(function change(){
                window.location.href='/sense/test_question/1';
            }, 1000);
        }

    }

    window.onload =function countstart() {
        count = eval(document.form_countdown.counter.value);
        timerID = setInterval('countdown()',1000);
        document.form_countdown.start.disabled = true; //開始ボタンを使用禁止
    }

    function countstop() {
        clearInterval(timerID);
        document.form_countdown.start.disabled = false; //開始ボタンを解除
        document.form_countdown.reset(); //初期値に戻す
    }

    function countdown() {
        document.form_countdown.counter.value= count; //カウント表示
        count--; //カウントダウン
        if (count < 0) countstop();//カウント終了

    }


</script>

<tr  th:object="${words}">
    <td th:text="*{word}"></td>
</tr>


<br><br>





<div th:each=" word : ${words.getShuffledAnswers()}">
   <div th:each=" option : ${words}">

       <div th:switch="${word}">
          <span th:case="${option.meaning}" onClick="changepage(1)">
              <input type="button" th:value="${word}" >

          </span>

           <span th:case="*" onClick="changepage(2)">
              <input type="button" th:value="${word}" >
              <form th:action="@{/sense/test_quiz/}" method="get" />
　　　　　　　　
              </form>
          </span>


       </div>

   </div>
</div>

<div>
<form th:action="@{/sense/mypage/}" method="get">
<input type = "submit" th:value="ホーム"method="get">
</form>
</div>

<div th:if="${lastid}">
    <form th:action="@{/sense/test_result/}" method="get">
    　   <input type="submit" th:value="結果" method="get" onclick="deleteButton()" >　　　
    </form>
</div>

<script>
    function deleteButton() {
        tugieimg.style.display = "none";
    }
</script>






</body>
</html>
